Index: Xext/ChangeLog
===================================================================
RCS file: /cvs/xorg/lib/Xext/ChangeLog,v
retrieving revision 1.14
retrieving revision 1.15
diff -u -r1.14 -r1.15
--- Xext/ChangeLog	15 Dec 2005 00:24:29 -0000	1.14
+++ Xext/ChangeLog	12 Feb 2006 18:19:21 -0000	1.15
@@ -1,3 +1,9 @@
+2006-02-12  Alan Coopersmith  <alan.coopersmith@sun.com>
+
+	* man/Makefile.am: 
+	Bug #5628 <https://bugs.freedesktop.org/show_bug.cgi?id=5628>
+	Shadow pages not created correctly when MANDIR & MANSUFFIX don't match.
+
 2005-12-14  Kevin E. Martin  <kem-at-freedesktop-dot-org>
 
 	* configure.ac:
Index: Xext/man/Makefile.am
===================================================================
RCS file: /cvs/xorg/lib/Xext/man/Makefile.am,v
retrieving revision 1.9
retrieving revision 1.10
diff -u -r1.9 -r1.10
--- Xext/man/Makefile.am	6 Dec 2005 22:48:43 -0000	1.9
+++ Xext/man/Makefile.am	12 Feb 2006 18:19:21 -0000	1.10
@@ -1,5 +1,7 @@
 libmandir = $(LIB_MAN_DIR)
 
+LIB_MAN_DIR_SUFFIX = $(LIB_MAN_DIR:@mandir@/man%=%)
+
 libman_PRE = \
 	DBE.man \
 	DPMSCapable.man \
@@ -48,13 +50,13 @@
 shadows.DONE:
 	-rm -f $(all_aliases:=.@LIB_MAN_SUFFIX@)
 	(for i in $(XShape_man_aliases:=.@LIB_MAN_SUFFIX@) ; do \
-	echo .so man$(LIB_MAN_SUFFIX)/XShape.$(LIB_MAN_SUFFIX) > $$i; \
+	echo .so man$(LIB_MAN_DIR_SUFFIX)/XShape.$(LIB_MAN_SUFFIX) > $$i; \
 	done)
 	(for i in $(Xmbuf_man_aliases:=.@LIB_MAN_SUFFIX@) ; do \
-	echo .so man$(LIB_MAN_SUFFIX)/Xmbuf.$(LIB_MAN_SUFFIX) > $$i; \
+	echo .so man$(LIB_MAN_DIR_SUFFIX)/Xmbuf.$(LIB_MAN_SUFFIX) > $$i; \
 	done)
 	(for i in $(Xevi_man_aliases:=.@LIB_MAN_SUFFIX@) ; do \
-	echo .so man$(LIB_MAN_SUFFIX)/Xevi.$(LIB_MAN_SUFFIX) > $$i; \
+	echo .so man$(LIB_MAN_DIR_SUFFIX)/Xevi.$(LIB_MAN_SUFFIX) > $$i; \
 	done)
 	touch shadows.DONE
 
